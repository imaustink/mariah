!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";function r(e){return"number"==typeof e&&isNaN(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.startsWith=function(e,t,n){return e.substr(n||0,t.length)===t},t.endsWith=function(e,t,n){var r=(n||e.length)-t.length,o=e.lastIndexOf(t,r);return-1!==o&&o===r},t.stringIncludes=function(e,t,n){return-1!==e.indexOf(t,n||0)},t.isRealNaN=r,t.arrayIncludes=function(e,t,n){var o=e.length;if(0===o)return!1;var i=0|n,s=r(t),a=i>=0?i:o+i;for(;a<o;){var c=e[a++];if(c===t)return!0;if(s&&r(c))return!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaults=void 0,t.parse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=(0,r.default)(e,t),s=(0,o.default)(n,t);return(0,i.format)(s,t)},t.stringify=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return(0,s.toHTML)(e,t)};var r=c(n(2)),o=c(n(3)),i=n(4),s=n(5),a=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var l=t.parseDefaults={voidTags:a.voidTags,closingTags:a.closingTags,childlessTags:a.childlessTags,closingTagAncestorBreakers:a.closingTagAncestorBreakers,includePositions:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.feedPosition=o,t.jumpPosition=i,t.makeInitialPosition=s,t.copyPosition=a,t.default=function(e,t){var n={str:e,options:t,position:{index:0,column:0,line:0},tokens:[]};return c(n),n.tokens},t.lex=c,t.findTextEnd=u,t.lexText=d,t.lexComment=p,t.lexTag=f,t.isWhitespaceChar=m,t.lexTagName=y,t.lexTagAttributes=v,t.lexSkipTag=b;var r=n(0);function o(e,t,n){for(var r=e.index,o=e.index=r+n,i=r;i<o;i++){"\n"===t.charAt(i)?(e.line++,e.column=0):e.column++}}function i(e,t,n){return o(e,t,n-e.index)}function s(){return{index:0,column:0,line:0}}function a(e){return{index:e.index,line:e.line,column:e.column}}function c(e){for(var t=e.str,n=e.options.childlessTags,o=t.length;e.position.index<o;){var i=e.position.index;if(d(e),e.position.index===i)if((0,r.startsWith)(t,"!--",i+1))p(e);else{var s=f(e),a=s.toLowerCase();(0,r.arrayIncludes)(n,a)&&b(s,e)}}}var l=/[A-Za-z0-9]/;function u(e,t){for(;;){var n=e.indexOf("<",t);if(-1===n)return n;var r=e.charAt(n+1);if("/"===r||"!"===r||l.test(r))return n;t=n+1}}function d(e){var t=e.str,n=e.position,r=u(t,n.index);if(r!==n.index){-1===r&&(r=t.length);var o=a(n),s=t.slice(n.index,r);i(n,t,r);var c=a(n);e.tokens.push({type:"text",content:s,position:{start:o,end:c}})}}function p(e){var t=e.str,n=e.position,r=a(n);o(n,t,4);var s=t.indexOf("--\x3e",n.index),c=s+3;-1===s&&(s=c=t.length);var l=t.slice(n.index,s);i(n,t,c),e.tokens.push({type:"comment",content:l,position:{start:r,end:a(n)}})}function f(e){var t=e.str,n=e.position,r="/"===t.charAt(n.index+1),i=a(n);o(n,t,r?2:1),e.tokens.push({type:"tag-start",close:r,position:{start:i}});var s=y(e);v(e);var c="/"===t.charAt(n.index);o(n,t,c?2:1);var l=a(n);return e.tokens.push({type:"tag-end",close:c,position:{end:l}}),s}var h=/\s/;function m(e){return h.test(e)}function y(e){for(var t=e.str,n=e.position,r=t.length,o=n.index;o<r;){var s=t.charAt(o);if(!(m(s)||"/"===s||">"===s))break;o++}for(var a=o+1;a<r;){var c=t.charAt(a);if(!!(m(c)||"/"===c||">"===c))break;a++}i(n,t,a);var l=t.slice(o,a);return e.tokens.push({type:"tag",content:l}),l}function v(e){for(var t=e.str,n=e.position,o=e.tokens,s=n.index,a=null,c=s,l=[],u=t.length;s<u;){var d=t.charAt(s);if(a){d===a&&(a=null),s++}else{if("/"===d||">"===d){s!==c&&l.push(t.slice(c,s));break}if(m(d))s!==c&&l.push(t.slice(c,s)),c=s+1,s++;else"'"===d||'"'===d?(a=d,s++):s++}}i(n,t,s);for(var p=l.length,f="attribute",h=0;h<p;h++){var y=l[h];if(-1===y.indexOf("=")){var v=l[h+1];if(v&&(0,r.startsWith)(v,"=")){if(v.length>1){var g=y+v;o.push({type:f,content:g}),h+=1;continue}var b=l[h+2];if(h+=1,b){var x=y+"="+b;o.push({type:f,content:x}),h+=1;continue}}}if((0,r.endsWith)(y,"=")){var k=l[h+1];if(k&&!(0,r.stringIncludes)(k,"=")){var w=y+k;o.push({type:f,content:w}),h+=1;continue}var T=y.slice(0,-1);o.push({type:f,content:T})}else o.push({type:f,content:y})}}var g=[].push;function b(e,t){for(var n=t.str,r=t.position,o=t.tokens,s=e.toLowerCase(),c=n.length,l=r.index;l<c;){var u=n.indexOf("</",l);if(-1===u){d(t);break}var p=a(r);i(p,n,u);var h={str:n,position:p,tokens:[]};if(s===f(h).toLowerCase()){if(u!==r.index){var m=a(r);i(r,n,u),o.push({type:"text",content:n.slice(m.index,u),position:{start:m,end:a(r)}})}g.apply(o,h.tokens),i(r,n,h.position.index);break}l=h.position.index}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={tagName:null,children:[]};return s({tokens:e,options:t,cursor:0,stack:[n]}),n.children},t.hasTerminalParent=o,t.rewindStack=i,t.parse=s;var r=n(0);function o(e,t,n){var o=n[e];if(o)for(var i=t.length-1;i>=0;){var s=t[i].tagName;if(s===e)break;if((0,r.arrayIncludes)(o,s))return!0;i--}return!1}function i(e,t,n,r){e[t].position.end=r;for(var o=t+1,i=e.length;o<i;o++)e[o].position.end=n;e.splice(t)}function s(e){for(var t=e.tokens,n=e.options,a=e.stack,c=a[a.length-1].children,l=t.length,u=e.cursor;u<l;){var d=t[u];if("tag-start"===d.type){var p=t[++u];u++;var f=p.content.toLowerCase();if(d.close){for(var h=a.length,m=!1;--h>-1;)if(a[h].tagName===f){m=!0;break}for(;u<l;){if("tag-end"!==t[u].type)break;u++}if(m){i(a,h,d.position.start,t[u-1].position.end);break}}else{var y=(0,r.arrayIncludes)(n.closingTags,f);if(y)y=!o(f,a,n.closingTagAncestorBreakers);if(y)for(var v=a.length-1;v>0;){if(f===a[v].tagName){i(a,v,d.position.start,d.position.start),c=a[v-1].children;break}v-=1}for(var g=[],b=void 0;u<l&&"tag-end"!==(b=t[u]).type;)g.push(b.content),u++;u++;var x=[],k={start:d.position.start,end:b.position.end},w={type:"element",tagName:p.content,attributes:g,children:x,position:k};if(c.push(w),!(b.close||(0,r.arrayIncludes)(n.voidTags,f))){var T=a.push({tagName:f,children:x,position:k}),M={tokens:t,options:n,cursor:u,stack:a};s(M),u=M.cursor,a.length===T&&(w.position.end=t[u-1].position.end)}}}else c.push(d),u++}e.cursor=u}},function(e,t,n){"use strict";function r(e,t){var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}function o(e){var t=e.charAt(0),n=e.length-1;return('"'===t||"'"===t)&&t===e.charAt(n)?e.slice(1,n):e}function i(e){return e.map(function(e){var t=r(e.trim(),"=");return{key:t[0],value:"string"==typeof t[1]?o(t[1]):null}})}Object.defineProperty(t,"__esModule",{value:!0}),t.splitHead=r,t.unquote=o,t.format=function e(t,n){return t.map(function(t){var r=t.type,o="element"===r?{type:r,tagName:t.tagName.toLowerCase(),attributes:i(t.attributes),children:e(t.children,n)}:{type:r,content:t.content};return n.includePositions&&(o.position=t.position),o})},t.formatAttributes=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatAttributes=o,t.toHTML=i;var r=n(0);function o(e){return e.reduce(function(e,t){var n=t.key,r=t.value;if(null===r)return e+" "+n;var o=-1!==r.indexOf("'")?'"':"'";return e+" "+n+"="+o+r+o},"")}function i(e,t){return e.map(function(e){if("text"===e.type)return e.content;if("comment"===e.type)return"\x3c!--"+e.content+"--\x3e";var n=e.tagName,s=e.attributes,a=e.children;return(0,r.arrayIncludes)(t.voidTags,n.toLowerCase())?"<"+n+o(s)+">":"<"+n+o(s)+">"+i(a,t)+"</"+n+">"}).join("")}t.default={toHTML:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.childlessTags=["style","script","template"],t.closingTags=["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"],t.closingTagAncestorBreakers={li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]},t.voidTags=["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]},function(e,t,n){{const e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}},function(e,t,n){"use strict";n.r(t);class r{constructor(){this.on=((e,t)=>{this.handlers[e]||(this.handlers[e]=new Map),this.handlers[e].set(t,t)}),this.off=((e,t)=>{const n=this.handlers[e];n&&n.delete(t)}),this.emit=((e,...t)=>{const n=this.handlers[e];n&&n.forEach(e=>e(...t))}),this.handlers={}}}Symbol.for("Mariah.viewModel");const o=Symbol.for("Mariah.isObservable");class i{constructor(e){if(e[o])return e;const t=Array.isArray(e),n=new r;return this._data=Object.assign(e,{on:n.on.bind(n),off:n.off.bind(n),emit:n.emit.bind(n)}),this._proxy=new Proxy(this._data,{set(e,n,r){const o=e[n];return o!==r&&(r=c(...arguments),Reflect.set(e,n,r),t&&"length"===n||(e.emit("change",{type:"set"},n,r,o),e.emit(n,{type:"set"},r,o))),!0},get(e,t){return"_data"===t?this._data:function(e,t){if(t in e){let n=Reflect.get(...arguments);return n=c(e,t,n),Reflect.set(e,t,n),n}}(...arguments)},deleteProperty(e,t){const n=e[t];return e.emit("change",{type:"delete"},t,void 0,n),e.emit(t,{type:"delete"},void 0,n),Reflect.deleteProperty(...arguments)}}),this._proxy}}class s extends i{constructor(e=new Object){return super(e)}}class a extends i{constructor(e=new Array){return super(e)}}function c(e,t,n){return"object"!=typeof n||n[o]||((n=Array.isArray(n)?new a(n):new s(n))[o]=!0),n}var l=n(1);const u=new Map;function d(e,t,n){e.addEventListener(t,n),p(e,{teardown(){e.removeEventListener(t,n)}})}function p(e,t){const n=u.get(e);n?n.push(t):u.set(e,[t])}class f{constructor(){this.handlers=new Map}registerHandler(e,t){this.handlers.set(e,t)}teardown(){this.handlers.forEach((e,t)=>{t.off(e)}),this.handlers.clear()}}function h(e){const t=u.get(e),n=e.childNodes;if(t){for(let e=0;e<t.length;e++)t[e].teardown();u.delete(e)}if(n&&n.length)for(let e=0;e<n.length;e++)h(n[e])}class m extends f{constructor(e,t,{type:n}){switch(super(),n){case"bind":this.bind(t.parent,t.property,e.child,e.property,!0),this.bind(e.child,e.property,t.parent,t.property);break;case"to":this.bind(e.child,e.property,t.parent,t.property,!0);break;case"from":this.bind(t.parent,t.property,e.child,e.property,!0)}}bind(e,t,n,r,o){const i="function"==typeof r&&r||((e,t)=>{n[r]=t});o&&i(null,e[t],n[r]),e.on(t,i),this.registerHandler(e,i)}}class y extends f{constructor(e,t,{type:n="bind"}){switch(super(),n){case"bind":this.bind(t,e,!0),this.bind(e,t);break;case"to":this.bind(e,t,!0);break;case"from":this.bind(t,e,!0)}}bind(e,t,n){n&&Object.assign(t,e);const r=(e,n,r)=>{switch(e.type){case"set":t[n]=r;break;case"delete":delete t[n]}};e.on("change",r),this.registerHandler(e,r)}}const v=/,\s?/g,g=/:\s?/,b={bind(e,t,n,r){function o(){r[n]=e[t]}if(e.viewModel);else{d(e,"input",o),e.value&&o();const i=new m({child:{},property:function(n,r){e[t]=r}},{parent:r,property:n},{type:"from"});p(e,i)}},class(e,t,n,r){const o={};function i(t,n,r){const i=o[n];i&&(r?e.classList.add(i):e.classList.remove(i))}const s=n.split(v);for(let e=0;e<s.length;e++){const[t,n]=s[e].split(g);o[n]=t,i(0,n,r[n])}const a=new m({child:{},property:i},{parent:r,property:"change"},{type:"from"});p(e,a)},on(e,t,n,r){d(e,t,function(e){const t=r[n];"function"==typeof t&&t.call(r,e,r)})},if(e,t,n,r){const o=document.createTextNode(""),i=document.createDocumentFragment();i.appendChild(o);const s=new m({child:{},property:function(t,n){n?o.parentNode.replaceChild(e,o):e.parentNode.replaceChild(o,e)}},{parent:r,property:n},{type:"from"});return p(e,s),i},for(e,t,n){const r=new Map,o={},i=n[t],a=document.createDocumentFragment(),c=document.createTextNode("");function l(t,i){const a=new s({$index:i,$value:t}),l=T([e],a).firstChild;if("object"==typeof t){p(l,new y(a,t,{type:"from"}))}if(p(l,new y(a,n,{type:"from"})),o[i]){const e=o[i];r.delete(e),r.set(l,i),o[i]=l,c.parentNode.replaceChild(l,e),h(e)}else r.set(l,i),o[i]=l,c.parentNode.appendChild(l)}if(a.appendChild(c),Array.isArray(i))for(let e=0;e<i.length;e++)l(i[e],e);else if("object"==typeof i)for(let e in i._data)i.hasOwnProperty(e)&&l(i._data[e],e);return i.on("change",(e,t,n)=>{"set"===e.type?l(n,t):"delete"===e.type&&function(e){const t=o[e];if(t)for(M(t);o[e];){const t=o[e+1];o[e]=t,t&&r.set(t,e),e++}}(t)}),a}},x=/{{\s*([^}]+)\s*}}/,k="m-";function w(e,t){return T(Object(l.parse)(e),t)}function T(e,t,n=document.createDocumentFragment()){for(let r=0;r<e.length;r++){const o=e[r];switch(o.type){case"element":let e=N(o,t);n.appendChild(e),o.children.length&&e.appendChild(T(o.children,t));break;case"text":const r=C(o.content,t);n.appendChild(r)}}return n}function M(e){h(e),e.remove()}function C(e,t){const n=document.createDocumentFragment();return O(e,(r,o,i)=>{const s=t[i],a=e.slice(0,r),c=document.createTextNode(s);return e=e.slice(r+o),a.length>1&&n.appendChild(document.createTextNode(a)),n.appendChild(c),p(c,new m({child:c,property:"nodeValue"},{parent:t,property:i},{type:"from"})),e}),e&&n.appendChild(document.createTextNode(e)),n}function N(e,t){const{tagName:n,attributes:r}=e,o=r.findIndex(e=>e.key===`${k}for`);if(-1!==o){const n=r[o].value;return r.splice(o,1),b.for(e,n,t)}const i=document.createElement(n);for(let e=0;e<r.length;e++){const n=r[e];if(n.key.startsWith(k)){const e=n.key.slice(2).split(":"),r=e[0],o=e[1],s=b[r];"function"==typeof s&&s(i,o,n.value,t)}else if(n.value){const e=n.value,{content:r,map:o}=_(e,t),s=new m({child:{},property(r,s){if(o[s]){const{content:r}=_(e,t);i.setAttribute(n.key,r)}}},{parent:t,property:"change"},{type:"from"});p(i,s),i.setAttribute(n.key,r)}}return i}function O(e,t){const n={};let r;for(;r=x.exec(e,"gm");)if(r){const o=r.index,i=r[0].length,s=r[1];e=t(o,i,s),n[s]=!0}return n}function _(e,t){const n=O(e,(n,r,o)=>e=function(e,t,n,r){return`${e.slice(0,t)}${r}${e.slice(t+n)}`}(e,n,r,t[o]));return{content:e,map:n}}n(7);class A extends HTMLElement{constructor(){if(super(),this.viewModel=new s,void 0!==this.template)throw new Error("Component should be extended with a template instance property or getter!")}static create({tag:e,template:t,viewModel:n}){if("string"!=typeof e||!e.includes("-"))throw new Error("A valid tag must be provided to create a new Component!");class r extends A{constructor(...e){var r;return r=super(...e),this.viewModel=new s(n),this.template=t,r}}return customElements.define(e,r),r}childrenConnectedCallback(){}connectedCallback(){const e=this.viewModel.connectedCallback;"function"==typeof e&&e.apply(this,arguments),this.appendChild(function(e,t){return"string"==typeof e?w(e,t):e instanceof HTMLElement&&"SCRIPT"===e.tagName?w(e.textContent,t):void 0}(this.template,this.viewModel)),this.childrenConnectedCallback()}disconnectedCallback(){const e=this.viewModel.disconnectedCallback;"function"==typeof e&&e.apply(this,arguments),M(this)}}A.create({tag:"my-component",template:'\n    <form m-on:submit="addItem">\n      <input m-bind:value="itemName">\n      <button type="submit">Create Todo</button>\n    </form>\n    <ul>\n      <li m-for="items">\n        {{$value}}\n        <button m-on:click="deleteItem">x</button>\n      </li>\n    </ul>\n  ',viewModel:{items:[],itemName:"",addItem(e){e.preventDefault(),this.items.push(this.itemName),this.itemName=""},deleteItem(e,{$index:t}){this.items.splice(t,1)}}}),document.body.appendChild(document.createElement("my-component"))}]);